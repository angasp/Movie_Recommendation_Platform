(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{215:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},409:function(e,t,a){},414:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),n=a(182),i=a(126),c=a(216);let o=localStorage.getItem("language");o||(o="en-US"),n.a.use(c.a).use(i.e).init({lng:o,fallbackLng:"en-US",whitelist:["en-US","fr-FR"],backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},debug:!1,interpolation:{escapeValue:!1}});n.a;var l=a(17),d=a.n(l),m=(a(256),a(257),a(38)),j=a(22),u=a.n(j);const p="login_user",b="register_user",h="update_user",g="auth_user",x="logout_user",O="/api/users",v="https://api.themoviedb.org/3/",f="844dba0bfd8f3a4f3799f6130ef9e335",y=localStorage.getItem("language"),w="https://image.tmdb.org/t/p/",_="w1280",N="w500",S={"Content-Type":"application/json"};var C=a(26),k=a(1);function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(a){let r=Object(C.c)((e=>e.user));const n=Object(C.b)();return Object(s.useEffect)((()=>{n(function(){const e=u.a.get("".concat(O,"/auth")).then((e=>e.data));return{type:g,payload:e}}()).then((async e=>{await!e.payload.isAuth?t&&a.history.push("/login"):!1===t&&a.history.push("/landing")}))}),[n,a.history]),Object(k.jsx)(e,{...a,user:r})}}var F,M=a(228),z=a(118),q=a(119);var E=q.a.div(F||(F=Object(z.a)(["\n  border: 4px solid #757575; /* grey */\n  border-top: 5px solid #19ba90; /* Blixbox green */\n  border-radius: 50%;\n  width: 55px;\n  height: 55px;\n  animation: spin 0.8s linear infinite;\n  margin: 20px auto;\n\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n"])));var T=()=>Object(k.jsx)(E,{}),A=a(86),R=a.n(A),D=(a(283),a(463)),P=a(88),L=a(113),B=a(62),U=a(449);const{Title:Y}=D.a;var H=function(e){let{landing:t,genre:a}=e;return t?Object(k.jsx)("div",{style:{background:"linear-gradient(to bottom, rgba(0,0,0,0)\n            39%,rgba(0,0,0,0)\n            41%,rgba(0,0,0,0.65)\n            100%),\n            url('".concat(e.image,"'), #1c1c1c"),height:"400px",backgroundSize:"100%, cover",backgroundPosition:"center, center",backgroundPositionY:"9px",width:"100%",position:"relative"}}):a?Object(k.jsx)("div",{style:{background:"linear-gradient(to bottom, rgba(0,0,0,0)\n            39%,rgba(0,0,0,0)\n            41%,rgba(0,0,0,0.65)\n            100%),\n            url('".concat(e.image,"'), #1c1c1c"),height:"400px",backgroundSize:"100%, cover",backgroundPosition:"center, center",backgroundPositionY:"9px",width:"100%",position:"relative"},children:Object(k.jsx)("div",{children:Object(k.jsx)("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"10px",padding:"10px",position:"absolute",maxWidth:"500px",bottom:"2rem",marginLeft:"2rem"},children:Object(k.jsxs)(Y,{style:{color:"white"},level:2,children:[" ",e.genreName]})})})}):void 0},W=a(462),V=a(470),$=a(103),X=a.n($);var Z,G,J=function(e){const{t:t}=Object(M.a)();let{actor:a,movie:s,image:r,movieId:n,movieName:i,actorName:c,charName:o,date:l,vote:d,movieGenre:m}=e;const j="#999",u="#cd5c5c",p="#ffa500",b="#52c41a",h=function(e){let t=b;return e&&0!==d?e<5.5?t=u:e<7&&(t=p):t=j,t}(d);return void 0!==a?Object(k.jsx)(B.a,{lg:4,md:6,xs:24,children:Object(k.jsx)("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(k.jsxs)(W.a,{hoverable:!0,style:{width:"100%"},alt:i,cover:Object(k.jsx)("img",{alt:c,src:r?"".concat(w).concat("w154").concat(r):"https://res.cloudinary.com/dkyqbngya/image/upload/v1586537514/twdjio2duy8ebxulqwti.png"}),children:[Object(k.jsx)("h3",{style:{textAlign:"center",fontWeight:"bold"},children:c}),Object(k.jsx)("h5",{style:{textAlign:"center",fontWeight:"bold"},children:o})]})})}):void 0!==s?Object(k.jsx)(B.a,{lg:4,md:6,xs:24,children:Object(k.jsx)("div",{style:{position:"relative"},children:Object(k.jsx)(V.a,{style:{backgroundColor:h},offset:[-15,15],count:d,children:Object(k.jsxs)(W.a,{className:"posterCard",hoverable:!0,style:{width:"100%",height:"100%"},alt:i,cover:Object(k.jsx)("img",{onClick:()=>window.location.href="/movie/"+n,alt:i,src:r?"".concat(r):t("landing.notAvail")}),children:[Object(k.jsx)("a",{style:{color:"black"},href:"/movie/".concat(n),children:Object(k.jsxs)("div",{style:{textAlign:"center",fontWeight:"bold"},children:[i," (",l?X()(new Date(l)).format("YYYY"):"N/A",")"]})}),Object(k.jsx)("br",{}),Object(k.jsx)("div",{style:{textAlign:"center"},children:m})]})})})}):void 0};const K=q.a.div(Z||(Z=Object(z.a)(["\n  width: 100%;\n  height: 105px;\n  background: white;\n  padding: 25px 20px 0px 20px;\n  box-sizing: border-box;\n  color: black;\n"]))),Q=q.a.div(G||(G=Object(z.a)(["\n  max-width: 1280px;\n  width: 100%;\n  height: 55px;\n  background: white;\n  margin: 0 auto;\n  border-radius: 40px;\n  border: solid 0.5px black;\n  position: relative;\n  color: black;\n\n  .fa-search {\n    position: absolute;\n    left: 20px;\n    top: 12px;\n    color: black;\n    z-index: auto;\n  }\n\n  input {\n    font-family: 'Abel', sans-serif;\n    font-size: 28px;\n    position: absolute;\n    left: 0px;\n    margin: 8px 0;\n    padding: 0 0 0 60px;\n    border: 0;\n    width: 95%;\n    background: transparent;\n    height: 40px;\n    color: black;\n    box-sizing: border-box;\n\n    :focus {\n      outline: none;\n    }\n\n    @media screen and (max-width: 720px) {\n      font-size: 28px;\n    }\n  }\n"])));var ee=a(243);var te=e=>{let{callback:t}=e;const{t:a}=Object(M.a)(),[r,n]=Object(s.useState)(""),i=Object(s.useRef)(null),c=e=>{const{value:a}=e.target;clearTimeout(i.current),n(a),i.current=setTimeout((()=>{t(a)}),500)};return Object(k.jsx)(K,{children:Object(k.jsxs)(Q,{children:[Object(k.jsx)(ee.a,{className:"fa-search",style:{fontSize:"30px"}}),Object(k.jsx)("input",{type:"text",className:"large",placeholder:a("landing.search"),onChange:c,value:r}),Object(k.jsx)("input",{type:"text",className:"small",placeholder:a("landing.searchSmall"),onChange:c,value:r})]})})},ae=a(43),se=a(472),re=a(178),ne=a.n(re);const ie=localStorage.getItem("language"),ce=new Date;const{Title:oe}=D.a,le=new Date;var de=()=>{const[{item:{Movies:e,CurrentPage:t,totalPages:a},loading:n,error:i,year:c,sort:o,rating:l,yearRange:d,genreID:m,selectEl:j,selectElPop:u},p,b,h,g,x,O,_]=(()=>{const[e,t]=Object(s.useState)({Movies:[]}),[a,r]=Object(s.useState)(!0),[n,i]=Object(s.useState)(!1),[c,o]=Object(s.useState)(""),[l,d]=Object(s.useState)("popularity.desc"),[m,j]=Object(s.useState)({min:0,max:10}),[u,p]=Object(s.useState)({min:1980,max:2022}),[b,h]=Object(s.useState)([]),g=Object(s.useRef)(null),x=Object(s.useRef)(null),O=async e=>{i(!1),r(!0);const a=e.search("page");try{const s=await(await fetch(e)).json();t((e=>({...e,Movies:-1!==a?[...e.Movies,...s.results]:[...s.results],CurrentPage:s.page,totalPages:s.total_pages})))}catch(n){i(!0)}r(!1)};return Object(s.useEffect)((()=>{const e=localStorage.getItem("language");O("".concat(v,"discover/movie?api_key=").concat(f,"&language=").concat(e,"&vote_count.gte=2500&sort_by=").concat(l,"&primary_release_year=").concat(c,"&vote_average.gte=").concat(m.min,"&vote_average.lte=").concat(m.max,"&primary_release_date.gte=").concat(u.min,"-01-01&primary_release_date.lte=").concat(u.max===ce.getFullYear()?function(e){const t=e.getFullYear().toString(),a=(e.getMonth()+1).toString(),s=e.getDate().toString(),r=a.split(""),n=s.split("");return t+"-"+(r[1]?a:"0"+r[0])+"-"+(n[1]?s:"0"+n[0])}(ce):u.max+"-12-31","&with_genres=").concat(b))}),[ie,c,l,m.min,m.max,u.min,u.max,b]),[{item:e,loading:a,error:n,year:c,sort:l,rating:m,yearRange:u,genreID:b,selectEl:g,selectElPop:x},O,e=>{p({min:1980,max:2022}),o(e.target.value),r(!1)},e=>{d(e.target.value),r(!1)},e=>{d("popularity.desc"),j(e),r(!1)},e=>{o(""),g.current.value="",p(e),r(!1)},e=>{h(e.target.value),r(!1)},()=>{g.current.value="",x.current.value="popularity.desc",o(""),h(""),j({min:0,max:10}),p({min:1980,max:2020}),d("popularity.desc"),r(!1)}]})(),[S,C]=Object(s.useState)(""),[I,F]=Object(s.useState)(!1),z=Object(s.useRef)(null),{t:q}=Object(M.a)();function E(e){const t=e.getFullYear().toString(),a=(e.getMonth()+1).toString(),s=e.getDate().toString(),r=a.split(""),n=s.split("");return t+"-"+(r[1]?a:"0"+r[0])+"-"+(n[1]?s:"0"+n[0])}Object(s.useEffect)((()=>{window.addEventListener("scroll",R)}),[]);const A=[{id:28,name:q("genre.Action")},{id:12,name:q("genre.Adventure")},{id:16,name:q("genre.Animation")},{id:35,name:q("genre.Comedy")},{id:80,name:q("genre.Crime")},{id:99,name:q("genre.Documentary")},{id:18,name:q("genre.Drama")},{id:10751,name:q("genre.Family")},{id:14,name:q("genre.Fantasy")},{id:36,name:q("genre.History")},{id:27,name:q("genre.Horror")},{id:10402,name:q("genre.Music")},{id:9648,name:q("genre.Mystery")},{id:10749,name:q("genre.Romance")},{id:878,name:q("genre.Sci-Fi")},{id:10770,name:q("genre.TV-Movie")},{id:53,name:q("genre.Thriller")},{id:10752,name:q("genre.War")},{id:37,name:q("genre.Western")}],R=e=>{const t="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,a=document.body,s=document.documentElement,r=Math.max(a.scrollHeight,a.offsetHeight,s.clientHeight);t+window.pageYOffset>=r-1&&z.current&&z.current.click()},D=(new Date).getFullYear(),Y=Object(se.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_tqdqw1tcevm.js"});return i?Object(k.jsx)("div",{style:{width:"100%",fontSize:"1.5rem",height:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:"Woops! Something went very wrong..."}):Object(k.jsxs)("div",{style:{width:"100%",margin:"0"},children:[Object(k.jsx)(H,{landing:!0,image:"https://res.cloudinary.com/dkyqbngya/image/upload/v1586011642/czr9s0nxspurc9blgn9l.jpg"}),Object(k.jsx)(te,{callback:e=>{const t=e?"".concat(v,"search/movie?api_key=").concat(f,"&language=").concat(y,"&query=")+e:"".concat(v,"discover/movie?api_key=").concat(f,"&language=").concat(y,"&vote_count.gte=2500&sort_by=").concat(o,"&primary_release_year=").concat(c,"&primary_release_date.gte=").concat(d.min,"-01-01&primary_release_date.lte=").concat(d.max===le.getFullYear()?E(le):d.max+"-12-31","&with_genres=").concat(m);C(e),p(t)}}),Object(k.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(k.jsx)(P.a,{type:"primary",shape:"round",onClick:()=>{F(!I)},style:{fontSize:"1rem"},children:q(I?"filters.dontShowFilters":"filters.showFilters")})}),I&&Object(k.jsxs)("div",{style:{width:"85%",margin:"1rem auto",justifyContent:"center"},children:[Object(k.jsx)("br",{}),Object(k.jsxs)(L.a,{gutter:[8,8],children:[Object(k.jsx)(B.a,{span:12,children:Object(k.jsxs)("form",{style:{textAlign:"center"},children:[Object(k.jsx)("label",{style:{padding:"10px"},children:Object(k.jsxs)("b",{children:[q("filters.sortMovies"),":"]})}),Object(k.jsxs)("select",{name:"sortBy",onChange:h,ref:u,children:[Object(k.jsx)("option",{value:"popularity.desc",children:q("filters.sortMovies")}),Object(k.jsx)("option",{value:"primary_release_date.desc",children:q("filters.releaseYearHigh")}),Object(k.jsx)("option",{value:"primary_release_date.asc",children:q("filters.releaseYearLow")}),Object(k.jsx)("option",{value:"original_title.asc",children:q("filters.titleName")}),Object(k.jsx)("option",{value:"vote_average.desc",children:q("filters.ratingHigh")}),Object(k.jsx)("option",{value:"vote_average.asc",children:q("filters.ratingLow")})]})]})}),Object(k.jsx)("br",{}),Object(k.jsx)(B.a,{span:12,children:Object(k.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(k.jsx)("p",{style:{display:"flex",justifyContent:"center",paddingRight:"20px"},children:Object(k.jsx)("b",{children:q("filters.rating")})}),Object(k.jsx)(ne.a,{className:"input-range",maxValue:10,minValue:0,value:l,onChange:e=>g(e)})]})}),Object(k.jsx)("br",{})]}),Object(k.jsxs)(L.a,{gutter:[8,8],children:[Object(k.jsx)(B.a,{span:12,children:Object(k.jsxs)("form",{style:{textAlign:"center"},children:[Object(k.jsx)("label",{style:{padding:"10px"},children:Object(k.jsxs)("b",{children:[q("filters.sortYear"),":"]})}),Object(k.jsxs)("select",{onChange:b,ref:j,children:[Object(k.jsx)("option",{value:"",children:q("filters.year")}),Array.from(new Array(41),((e,t)=>Object(k.jsx)("option",{value:D-t,children:D-t},t)))]})]})}),Object(k.jsx)(B.a,{span:12,children:Object(k.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(k.jsx)("p",{style:{display:"flex",justifyContent:"center",paddingRight:"20px"},children:Object(k.jsx)("b",{children:q("filters.releaseYear")})}),Object(k.jsx)(ne.a,{className:"input-range",maxValue:2020,minValue:1980,value:d,onChange:e=>x(e)})]})})]}),Object(k.jsx)(U.a,{children:"Genres"}),Object(k.jsx)("div",{style:{textAlign:"center"},children:A.map((e=>Object(k.jsx)(P.a,{shape:"round",size:"small",onClick:O,value:e.id,style:{borderColor:"#19ba90",textAlign:"center",fontSize:"0.9em",margin:"1px"},children:e.name},e.name)))}),Object(k.jsx)("br",{}),Object(k.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(k.jsx)(P.a,{onClick:_,children:q("filters.clearFilters")})})]}),Object(k.jsxs)("div",{style:{width:"85%",margin:"1rem auto"},children:[Object(k.jsxs)(r.a.Fragment,{children:[Object(k.jsxs)(oe,{level:2,children:[Object(k.jsx)(Y,{type:"icon-movie3",style:{fontSize:"35px",paddingRight:"10px"}}),q(S?"landing.searchRes":"landing.latest")]}),Object(k.jsx)("hr",{}),Object(k.jsx)("br",{})]}),Object(k.jsx)(L.a,{gutter:[16,16],children:void 0!==e&&e[0]?e&&e.map(((e,t)=>Object(k.jsx)(r.a.Fragment,{children:e&&e.poster_path&&e.release_date&&e.vote_count>2300&&null!==e.imdb_id&&null!==e.backdrop_path&&null!==e.overview&&Object(k.jsx)(J,{movie:!0,image:e.poster_path?"".concat(w).concat(N).concat(e.poster_path):q("landing.notAvail"),movieId:e.id,movieName:e.title,date:e.release_date,vote:e.vote_average?e.vote_average:"N/A",movieGenre:e.genre_ids&&e.genre_ids.length&&e.genre_ids.map((e=>Object(k.jsx)("span",{children:A.map((t=>e===t.id&&Object(k.jsx)(ae.b,{to:"/landing/genre/".concat(t.name,"/").concat(t.id),children:Object(k.jsx)(P.a,{shape:"round",size:"small",style:{borderColor:"#19ba90",textAlign:"center",fontSize:"0.9em",margin:"1px"},children:t.name},t.name)},t.name)))},e))).slice(0,3)})},e.id))):!e[0]&&!n&&Object(k.jsx)("div",{style:{width:"100%",fontSize:"1.5rem",height:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:q("landing.noresults")})}),n&&Object(k.jsx)(T,{}),t<a&&!n&&Object(k.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(k.jsx)("div",{ref:z,className:"loadMore",onClick:()=>{const e="".concat(v,"discover/movie?api_key=").concat(f,"&language=").concat(y,"&vote_count.gte=2500&sort_by=").concat(o,"&primary_release_year=").concat(c,"&vote_average.gte=").concat(l.min,"&vote_average.lte=").concat(l.max,"&primary_release_date.gte=").concat(d.min,"-01-01&primary_release_date.lte=").concat(d.max===le.getFullYear()?E(le):d.max+"-12-31","&with_genres=").concat(m,"&page=").concat(t+1),a="".concat(v,"search/movie?api_key=").concat(f,"&language=").concat(y,"&query=").concat(S,"&page=").concat(t+1);p(S?a:e)},children:q("landing.loadmore")})})]})]})};const{Title:me}=D.a;var je=()=>{let{genreId:e,genreName:t,movieId:a}=Object(m.g)();const[{state:{Movies:n,MainMovieImage:i,CurrentPage:c,totalPages:o},loading:l,error:d},j]=(e=>{const[t,a]=Object(s.useState)({Movies:[]}),[r,n]=Object(s.useState)(!0),[i,c]=Object(s.useState)(!1),o=Object(m.f)(),l=async e=>{c(!1),n(!0);const t=e.search("page");try{const s=await(await fetch(e)).json();0===s.results.length&&o.goBack();const r=Math.floor(20*Math.random());a((e=>({...e,Movies:-1!==t?[...e.Movies,...s.results]:[...s.results],MainMovieImage:e.MainMovieImage||s.results[r],CurrentPage:s.page,totalPages:s.total_pages})))}catch(i){c(!0),console.error(i)}n(!1)};return Object(s.useEffect)((()=>{const t=localStorage.getItem("language");l("".concat(v,"discover/movie?api_key=").concat(f,"&language=").concat(t,"&with_genres=").concat(e))}),[e]),[{state:t,loading:r,error:i},l]})(e),u=Object(m.f)(),p=()=>{u.push("/movie/".concat(a))},[b,h]=Object(s.useState)(""),g=Object(s.useRef)(null),{t:x}=Object(M.a)();Object(s.useEffect)((()=>{window.addEventListener("scroll",y)}),[]);const O=[{id:28,name:x("genre.Action")},{id:12,name:x("genre.Adventure")},{id:16,name:x("genre.Animation")},{id:35,name:x("genre.Comedy")},{id:80,name:x("genre.Crime")},{id:99,name:x("genre.Documentary")},{id:18,name:x("genre.Drama")},{id:10751,name:x("genre.Family")},{id:14,name:x("genre.Fantasy")},{id:36,name:x("genre.History")},{id:27,name:x("genre.Horror")},{id:10402,name:x("genre.Music")},{id:9648,name:x("genre.Mystery")},{id:10749,name:x("genre.Romance")},{id:878,name:x("genre.Sci-Fi")},{id:10770,name:x("genre.TV-Movie")},{id:53,name:x("genre.Thriller")},{id:10752,name:x("genre.War")},{id:37,name:x("genre.Western")}],y=e=>{const t="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,a=document.body,s=document.documentElement,r=Math.max(a.scrollHeight,a.offsetHeight,s.clientHeight);t+window.pageYOffset>=r-1&&g.current&&g.current.click()},S=Object(se.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_tqdqw1tcevm.js"});return d?Object(k.jsx)("div",{children:"Something went wrong..."}):Object(k.jsxs)("div",{style:{width:"100%",margin:"0"},children:[l?Object(k.jsx)("div",{children:Object(k.jsx)(T,{})}):null!==i&&Object(k.jsx)(H,{genre:!0,image:i.backdrop_path?"".concat(w).concat(_).concat(i.backdrop_path):"https://res.cloudinary.com/dkyqbngya/image/upload/v1586787757/detykqycj7ejezsjmxln.png",genreName:t}),Object(k.jsx)(te,{callback:t=>{const a=t?"".concat(v,"search/movie?api_key=").concat(f,"&with_genres=").concat(e,"&query=")+t:"".concat(v,"discover/movie?api_key=").concat(f,"&with_genres=").concat(e);h(t),j(a)}}),Object(k.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(k.jsx)(P.a,{type:"primary",shape:"round",style:{fontSize:"1rem"},children:Object(k.jsx)("a",{href:"/landing",children:x("genre.landing")})})}),Object(k.jsxs)("div",{style:{width:"85%",margin:"1rem auto"},children:[l?null:Object(k.jsxs)(r.a.Fragment,{children:[Object(k.jsxs)(me,{level:2,children:[Object(k.jsx)(S,{type:"icon-movie3",style:{fontSize:"35px",paddingRight:"10px"}}),b?x("landing.searchRes"):t]}),Object(k.jsx)("hr",{}),Object(k.jsx)("br",{})]}),Object(k.jsx)(L.a,{gutter:[16,16],children:n[0]?n&&n.map(((e,t)=>Object(k.jsx)(r.a.Fragment,{children:e&&e.poster_path&&e.release_date&&e.vote_count>2300&&null!==e.imdb_id&&null!==e.backdrop_path&&null!==e.overview&&Object(k.jsx)(J,{movie:!0,onClick:p,image:e.poster_path?"".concat(w).concat(N).concat(e.poster_path):x("landing.notAvail"),movieId:e.id,movieName:e.title,date:e.release_date,vote:e.vote_average?e.vote_average:"N/A",movieGenre:e.genre_ids&&e.genre_ids.length&&e.genre_ids.map((e=>Object(k.jsx)("span",{children:O.map((t=>e===t.id&&Object(k.jsx)(ae.b,{to:"/landing/genre/".concat(t.name,"/").concat(t.id),children:Object(k.jsx)(P.a,{shape:"round",size:"small",style:{borderColor:"#19ba90",textAlign:"center",fontSize:"0.9em",margin:"1px"},children:t.name},t.name)},t.name)))},e))).slice(0,3)})},e.id))):!n[0]&&!l&&Object(k.jsx)("div",{style:{width:"100%",fontSize:"1.5rem",height:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:x("landing.noresults")})}),l&&Object(k.jsx)(T,{}),c<o&&!l&&Object(k.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(k.jsx)("div",{ref:g,className:"loadMore",onClick:()=>{const t="".concat(v,"discover/movie?api_key=").concat(f,"&with_genres=").concat(e,"&page=").concat(c+1),a="".concat(v,"search/movie?api_key=").concat(f,"&with_genres=").concat(e,"&query=").concat(b,"&page=").concat(c+1);j(b?a:t)},children:x("landing.loadmore")})})]})]})},ue=a(77),pe=a(33),be=a(464),he=a(466),ge=a(471),xe=a(473),Oe=a(474);const{Title:ve}=D.a;var fe=Object(m.h)((function(e){const{t:t}=Object(M.a)(),a=Object(C.b)(),r=!!localStorage.getItem("rememberMe"),[n,i]=Object(s.useState)(""),[c,o]=Object(s.useState)(r),l=()=>{o(!c)};return Object(k.jsx)(ue.a,{initialValues:{username:"",password:""},validationSchema:pe.a().shape({username:pe.c().min(2,t("login.usernameErr")).required(t("login.usernameErr2")),password:pe.c().min(8,t("login.passwordErr")).required(t("login.passwordErr2"))}),onSubmit:(s,r)=>{let{setSubmitting:n}=r;setTimeout((()=>{let r={username:s.username,password:s.password};a(function(e){const t=u.a.post("".concat(O,"/login"),e).then((e=>e.data));return{type:p,payload:t}}(r)).then((a=>{a.payload.loginSuccess?e.history.push("/landing"):i(t("login.formErr"))})).catch((e=>{i(t("login.formErr")),setTimeout((()=>{i("")}),3e3)})),n(!1)}),500)},children:e=>{const{values:a,touched:s,errors:r,isSubmitting:i,handleChange:o,handleBlur:d,handleSubmit:m}=e;return Object(k.jsx)("div",{className:"loginbg",children:Object(k.jsxs)("div",{className:"login",children:[Object(k.jsx)(ve,{level:3,style:{textAlign:"center"},children:t("login.login")}),Object(k.jsxs)("form",{onSubmit:m,children:[Object(k.jsxs)(be.a.Item,{required:!0,children:[Object(k.jsx)(he.a,{id:"username",prefix:Object(k.jsx)(xe.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:t("login.username"),type:"text",value:a.username,onChange:o,onBlur:d,className:r.username&&s.username?"text-input error":"text-input"}),r.username&&s.username&&Object(k.jsx)("div",{className:"input-feedback",children:r.username})]}),Object(k.jsxs)(be.a.Item,{required:!0,children:[Object(k.jsx)(he.a,{id:"password",prefix:Object(k.jsx)(Oe.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:t("login.password"),type:"password",autoComplete:"off",value:a.password,onChange:o,onBlur:d,className:r.password&&s.password?"text-input error":"text-input"}),r.password&&s.password&&Object(k.jsx)("div",{className:"input-feedback",children:r.password})]}),n&&Object(k.jsx)("label",{children:Object(k.jsx)("p",{style:{color:"#ff0000bf",textAlign:"center",fontSize:"0.8rem",border:"1px solid",padding:"0.5rem",borderRadius:"10px"},children:n})}),Object(k.jsxs)(be.a.Item,{children:[Object(k.jsx)(ge.a,{id:"rememberMe",onChange:l,checked:c,children:t("login.remember")}),Object(k.jsx)("div",{children:Object(k.jsx)(P.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{minWidth:"100%"},disabled:i,onSubmit:m,children:t("login.login")})}),"Or ",Object(k.jsx)("a",{href:"/register",children:t("login.registernow")})]})]})]})})}})})),ye=a(239);const we={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},_e={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};var Ne=function(e){const{t:t}=Object(M.a)(),[a,n]=Object(s.useState)(""),[i,c]=Object(s.useState)(!1),[o,l]=r.a.useState(""),d=r.a.useRef();var m=["jpg","jpeg","png","gif"];const j=e=>{e.preventDefault(),l(e.target.value);const a=e.target.files[0];var s="https://api.cloudinary.com/v1_1/".concat("dkyqbngya","/image/upload");if(a&&0!==a.length&&a){var r=a.name.replace(/.*\./,"").toLowerCase();if(m.indexOf(r)<0)return ye.b.error("".concat(a.type).concat(t("register.imgFormat"))),d.current.value="",l(""),void n("");if(a.size>15e4)return ye.b.error("".concat(a.name).concat(t("register.imgTooLarge"))),d.current.value="",l(""),void n("");{var i=new FormData;i.append("file",a),i.append("upload_preset","f7r0dz2t"),c(!0);const e={headers:{"X-Requested-With":"XMLHttpRequest"}};u.a.post(s,i,e).then((e=>{c(!1);var t=e.data.secure_url.split("/");t.splice(-3,0,"w_125,c_scale");var a=new Image;a.src=t.join("/"),n(a.src)})).catch((e=>{if(e)switch(e.response.status){case 400:ye.b.error(t("register.imgInvalid"));break;case 404:ye.b.error(t("register.imgNotFound"));break;case 500:ye.b.error(t("register.imgError"))}}))}}},p=Object(C.b)();return Object(k.jsx)(ue.a,{initialValues:{email:"",firstName:"",lastName:"",username:"",password:"",confirmPassword:"",image:""},validationSchema:pe.a().shape({username:pe.c().required(t("register.usernameErr")).matches(/^[A-Za-z0-9_]{2,20}$/,t("register.usernameRules")).min(2,t("register.usernameMin")).max(20,t("register.usernameMax")),firstName:pe.c().required(t("register.firstNameErr")).matches(/^[A-Z]+$/i,t("register.firstNameAlpha")).min(2,t("register.firstNameMin")).max(20,t("register.firstNameMax")),lastName:pe.c().required(t("register.lastNameErr")).matches(/^[A-Z]+$/i,t("register.lastNameAlpha")).min(2,t("register.lastNameMin")).max(20,t("register.lastNameMax")),email:pe.c().email(t("register.emailInvalid")).required(t("register.emailErr")),password:pe.c().min(8,t("register.passwordMin")).max(15,t("register.passwordMax")).required(t("register.passwordErr")),confirmPassword:pe.c().oneOf([pe.b("password"),null],t("register.passwordMatch")).required(t("register.cpasswordErr"))}),onSubmit:(s,r)=>{let{setSubmitting:n}=r;setTimeout((()=>{let r={email:s.email,password:s.password,username:s.username,firstName:s.firstName,lastName:s.lastName,image:a};a&&""!==a?p(function(e){console.log(e);const t=u.a.post("".concat(O,"/register"),e).then((e=>e.data));return{type:b,payload:t}}(r)).then((t=>{t.payload.success?e.history.push("/login"):alert(t.payload.err)})):ye.b.error(t("register.imageErr")),n(!1)}),500)},children:e=>{const{values:s,touched:r,errors:n,isSubmitting:c,handleChange:l,handleBlur:m,handleSubmit:u}=e;return Object(k.jsx)("div",{className:"registerbg",children:Object(k.jsxs)("div",{className:"register",children:[Object(k.jsx)("h1",{style:{textAlign:"center"},children:t("register.signup")}),Object(k.jsxs)(be.a,{style:{minWidth:"375px"},...we,onSubmit:u,children:[Object(k.jsxs)(be.a.Item,{required:!0,label:t("register.username"),children:[Object(k.jsx)(he.a,{id:"username",placeholder:t("register.usernameForm"),type:"text",autoComplete:"username",value:s.username,onChange:l,onBlur:m,className:n.username&&r.username?"text-input error":"text-input"}),n.username&&r.username&&Object(k.jsx)("div",{className:"input-feedback",children:n.username})]}),Object(k.jsxs)(be.a.Item,{required:!0,label:t("register.firstName"),children:[Object(k.jsx)(he.a,{id:"firstName",placeholder:t("register.firstNameForm"),type:"text",value:s.firstName,onChange:l,onBlur:m,className:n.firstName&&r.firstName?"text-input error":"text-input"}),n.firstName&&r.firstName&&Object(k.jsx)("div",{className:"input-feedback",children:n.firstName})]}),Object(k.jsxs)(be.a.Item,{required:!0,label:t("register.lastName"),children:[Object(k.jsx)(he.a,{id:"lastName",placeholder:t("register.lastNameForm"),type:"text",value:s.lastName,onChange:l,onBlur:m,className:n.lastName&&r.lastName?"text-input error":"text-input"}),n.lastName&&r.lastName&&Object(k.jsx)("div",{className:"input-feedback",children:n.lastName})]}),Object(k.jsxs)(be.a.Item,{required:!0,label:t("register.email"),children:[Object(k.jsx)(he.a,{id:"email",placeholder:t("register.emailForm"),type:"email",autoComplete:"email",value:s.email,onChange:l,onBlur:m,className:n.email&&r.email?"text-input error":"text-input"}),n.email&&r.email&&Object(k.jsx)("div",{className:"input-feedback",children:n.email})]}),Object(k.jsxs)(be.a.Item,{required:!0,label:t("register.password"),hasFeedback:!0,validateStatus:n.password&&r.password?"error":"success",children:[Object(k.jsx)(he.a,{id:"password",placeholder:t("register.passwordForm"),type:"password",autoComplete:"new-password",value:s.password,onChange:l,onBlur:m,className:n.password&&r.password?"text-input error":"text-input"}),n.password&&r.password&&Object(k.jsx)("div",{className:"input-feedback",children:n.password})]}),Object(k.jsxs)(be.a.Item,{required:!0,label:t("register.cpassword"),hasFeedback:!0,validateStatus:n.cpassword&&r.cpassword?"error":"success",children:[Object(k.jsx)(he.a,{id:"confirmPassword",placeholder:t("register.cpasswordForm"),type:"password",autoComplete:"new-password",value:s.confirmPassword,onChange:l,onBlur:m,className:n.confirmPassword&&r.confirmPassword?"text-input error":"text-input"}),n.confirmPassword&&r.confirmPassword&&Object(k.jsx)("div",{className:"input-feedback",children:n.confirmPassword})]}),Object(k.jsxs)(be.a.Item,{required:!0,label:t("register.image"),children:[Object(k.jsx)(he.a,{id:"image",type:"file",name:"image",accept:"image/*",onChange:j,onBlur:m,value:o,ref:d}),Object(k.jsx)("div",{name:"image",className:"imagePreview",children:i?Object(k.jsx)(T,{}):Object(k.jsx)("img",{src:a,alt:""})})]}),Object(k.jsx)(be.a.Item,{..._e,children:Object(k.jsx)(P.a,{onClick:u,type:"primary",disabled:c,children:t("register.submit")})})]})]})})}})},Se=a.p+"static/media/logo1.a705a284.png";a(215);const Ce=Object(se.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_05evm2uwptc9.js"});var ke=function(e){const{t:t}=Object(M.a)(),a=Object(C.c)((e=>e.user));return a.userData&&!a.userData.isAuth?Object(k.jsx)("div",{className:"menu__logo",children:Object(k.jsx)("a",{href:"/",children:Object(k.jsx)("img",{src:Se,alt:"Logo",style:{height:"100%"}})})}):Object(k.jsxs)("div",{className:"menu_left",children:[Object(k.jsx)("div",{className:"menu__logo",children:Object(k.jsx)("a",{href:"/landing",children:Object(k.jsx)("img",{src:Se,alt:"Logo",style:{height:"100%"}})})}),Object(k.jsx)("div",{className:"popcorn_icon",children:Object(k.jsxs)("a",{href:"/favorite",children:[Object(k.jsx)(Ce,{type:"icon-popcorn",style:{fontSize:25}}),t("navbar.favorites")]})})]})},Ie=a(465),Fe=a(475),Me=a(476),ze=a(478),qe=a(450),Ee=a(477),Te=a(453),Ae=a(461);const Re=Object(qe.a)((e=>({formControl:{marginLeft:10,alignItems:"center"},selectEmpty:{"& .MuiSelect-root":{background:"white"},marginTop:e.spacing(2),marginLeft:10}})));var De=Object(m.h)((function(e){const{t:t,i18n:a}=Object(M.a)();let n=a.language;const i=Re();function c(e){var t;t=e.target.value,a.changeLanguage(t),localStorage.setItem("language",e.target.value)}const o=Object(C.c)((e=>e.user)),l=()=>{u.a.get("".concat(O,"/logout")).then((t=>{200===t.status?e.history.push("/login"):alert("Log Out Failed")}))},[d,m]=Object(s.useState)(""),[j,p]=Object(s.useState)(!1);Object(s.useEffect)((()=>{b(),j||p(!0)}),[e,j]);const b=()=>{u.a.get("/api/users/auth").then((e=>{e.data?m(e.data.username):alert("Failed to get Username")}))},h=Object(se.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_5e8qc34kmnl.js"});return o.userData&&!o.userData.isAuth?Object(k.jsxs)(Ie.a,{mode:e.mode,children:[Object(k.jsx)(Ie.a.Item,{children:Object(k.jsxs)("a",{href:"/login",children:[t("navbar.login"),Object(k.jsx)(Fe.a,{style:{padding:"10px"}})]})},"mail"),Object(k.jsx)(Ie.a.Item,{children:Object(k.jsxs)("a",{href:"/register",children:[t("navbar.register"),Object(k.jsx)(Me.a,{style:{padding:"10px"}})]})},"app"),Object(k.jsx)(r.a.Fragment,{children:Object(k.jsx)(Te.a,{className:i.formControl,children:Object(k.jsxs)(Ae.a,{value:n,onChange:c,displayEmpty:!0,autoWidth:!0,disableUnderline:!0,IconComponent:()=>"",className:i.selectEmpty,inputProps:{"aria-label":"Without label"},children:[Object(k.jsx)(Ee.a,{value:"en-US",children:Object(k.jsx)("img",{src:"https://res.cloudinary.com/dkyqbngya/image/upload/c_scale,w_25/v1585483470/united-states-of-america-flag-button-round-xs_xgcefz.png",alt:"US Flag"})}),Object(k.jsx)(Ee.a,{value:"fr-FR",children:Object(k.jsx)("img",{src:"https://res.cloudinary.com/dkyqbngya/image/upload/c_scale,w_25/v1585483466/france-flag-button-round-icon-64_uqllrc.png",alt:"French Flag"})})]})})})]}):Object(k.jsxs)(Ie.a,{mode:e.mode,children:[Object(k.jsx)(Ie.a.Item,{children:Object(k.jsxs)("a",{href:"/profile",children:[t("navbar.welcome"),"\xa0\xa0",Object(k.jsx)("span",{className:"username",children:d})]})},"profile"),Object(k.jsx)(Ie.a.Item,{children:Object(k.jsxs)("a",{href:"/users",children:[Object(k.jsx)(h,{type:"icon-group",style:{fontSize:"20px"}}),t("navbar.users")]})},"users"),Object(k.jsx)(Ie.a.Item,{children:Object(k.jsxs)("a",{onClick:l,children:[Object(k.jsx)(ze.a,{}),t("navbar.logout")]})},"logout"),Object(k.jsx)(r.a.Fragment,{children:Object(k.jsx)(Te.a,{className:i.formControl,children:Object(k.jsxs)(Ae.a,{value:n,onChange:c,displayEmpty:!0,autoWidth:!0,disableUnderline:!0,IconComponent:()=>"",className:i.selectEmpty,inputProps:{"aria-label":"Without label"},children:[Object(k.jsx)(Ee.a,{value:"en-US",children:Object(k.jsx)("img",{src:"https://res.cloudinary.com/dkyqbngya/image/upload/c_scale,w_25/v1585483470/united-states-of-america-flag-button-round-xs_xgcefz.png",alt:"US Flag"})}),Object(k.jsx)(Ee.a,{value:"fr-FR",children:Object(k.jsx)("img",{src:"https://res.cloudinary.com/dkyqbngya/image/upload/c_scale,w_25/v1585483466/france-flag-button-round-icon-64_uqllrc.png",alt:"French Flag"})})]})})})]})})),Pe=a(468),Le=a(479);var Be=function(){const[e,t]=Object(s.useState)(!1);return Object(C.c)((e=>e.user)),console.log(Se),Object(k.jsx)("nav",{className:"menu",style:{position:"fixed",zIndex:1,width:"100%",height:"5rem"},children:Object(k.jsxs)("div",{className:"menu__container",children:[Object(k.jsx)(ke,{mode:"horizontal"}),Object(k.jsx)("div",{className:"menu_right",children:Object(k.jsx)(De,{mode:"horizontal"})}),Object(k.jsx)(P.a,{className:"menu__mobile-button",type:"primary",onClick:()=>{t(!0)},children:Object(k.jsx)(Le.a,{})}),Object(k.jsxs)(Pe.a,{title:"Menu",placement:"right",className:"menu_drawer",closable:!1,onClose:()=>{t(!1)},visible:e,children:[Object(k.jsx)(ke,{mode:"inline"}),Object(k.jsx)(De,{mode:"inline"})]})]})})};var Ue=function(){return Object(k.jsx)("div",{style:{height:"80px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"1rem"}})};var Ye=Object(qe.a)((e=>({playerWrapper:{position:"relative",paddingTop:"56.25%"},reactPlayer:{position:"absolute",top:"0",left:"0"},buttonChooseSource:{color:"white",borderColor:"white"},buttonActors:{borderRadius:"10px !important"},loadingSources:{marginRight:"1em",color:"white"},movieContainer:{paddingTop:50,paddingBottom:50},backdrop:{position:"absolute",height:"100%",width:"100%",zIndex:-1,"&:after":{position:"absolute",content:"''",display:"block",top:0,left:0,width:"100%",height:"100%",background:"rgba(30, 47, 60, 0.75)",backgroundImage:"radial-gradient(circle at 20% 50%, rgba(30, 47, 60, 0.75) 0%, rgba(48, 65, 78, 0.75) 100%)"}},backdropImage:{display:"block",width:"100%",height:"100%",objectFit:"cover"},poster:{width:"100%",borderRadius:10,boxShadow:"0px 3px 20px #0000003b"},releaseDate:{fontSize:"11pt",color:"#dadde2"},vote:{display:"flex",alignItems:"center",fontSize:"12pt"},genreList:{listStyle:"none",padding:0,display:"flex",flexWrap:"wrap"},genre:{cursor:"pointer",padding:"1px 6px",marginRight:10,border:"1px solid white",borderRadius:4,fontSize:"10pt"},subtitle:{marginBottom:8,fontSize:"13pt",color:"white"},crewList:{listStyle:"none",padding:0}}))),He=a(455),We=a(469),Ve=a(467),$e=a(71),Xe=a(480),Ze=a(481);var Ge=function(e){const{t:t}=Object(M.a)(),a=Object(C.c)((e=>e.user)),[n,i]=Object(s.useState)(0),[c,o]=Object(s.useState)(0);let l=Object(s.useMemo)((()=>e.video?{videoId:e.videoId,userId:e.userId}:{commentId:e.commentId,userId:e.userId}),[e.video,e.commentId,e.videoId,e.userId]);return Object(s.useEffect)((()=>{let e=!0;return u.a.post("/api/like/getLikes",l).then((t=>{t.data.success&&e&&i(t.data.likes.length)})),()=>{e=!1}}),[e,l]),Object(s.useEffect)((()=>{let e=!0;return u.a.post("/api/like/getDislikes",l).then((t=>{t.data.success&&e&&o(t.data.dislikes.length)})),()=>{e=!1}}),[e,l]),Object(k.jsxs)(r.a.Fragment,{children:[Object(k.jsxs)("span",{children:[Object(k.jsx)($e.a,{title:t("movie.like"),children:Object(k.jsx)(Xe.a,{twoToneColor:"#19ba90",type:"like",onClick:()=>{if(a.userData&&!a.userData.isAuth)return e.history.push("/login");u.a.post("/api/like/upLike",l).then((t=>{if(!t.data.success)return e.history.push("/login");!0===t.data.up?(i(n+1),0!==c&&o(c-1)):i(n-1)}))}})}),Object(k.jsx)("span",{style:{paddingLeft:"8px",cursor:"auto"},children:n})]},"comment-basic-like"),"\xa0\xa0\xa0\xa0",Object(k.jsxs)("span",{children:[Object(k.jsx)($e.a,{title:t("movie.dislike"),children:Object(k.jsx)(Ze.a,{twoToneColor:"#19ba90",type:"dislike",onClick:()=>{if(a.userData&&!a.userData.isAuth)return e.history.push("/login");u.a.post("/api/like/upDisLike",l).then((t=>{if(!t.data.success)return e.history.push("/login");!0===t.data.up?(o(c+1),0!==n&&i(n-1)):o(c-1)}))}})}),Object(k.jsx)("span",{style:{paddingLeft:"8px",cursor:"auto"},children:c})]},"comment-basic-dislike")]})};const{Meta:Je}=W.a,Ke=Object(se.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_o2mk1ztsiol.js"}),{TextArea:Qe}=he.a;var et=function(e){const{t:t}=Object(M.a)(),a=Object(C.c)((e=>e.user)),[r,n]=Object(s.useState)(""),[i,c]=Object(s.useState)(!1),o=s=>{if(s.preventDefault(),!r)return ye.b.error(t("movie.replyEmptyCom"));let o=new Date;const l={writer:a.userData._id,postId:e.postId,date:o,responseTo:e.comment._id,content:(d=r,(d=d.toString()).replace(/<[^>]*(>|$)|&nbsp;|&zwnj;|&raquo;|&laquo;|&gt;/g,""))};var d;u.a.post("/api/comment/saveComment",l).then((a=>{a.data.success?(n(""),c(!i),e.refreshFunction(a.data.result)):ye.b.error(t("movie.failCom"))}))},l=[Object(k.jsx)(Ge,{comment:!0,commentId:e.comment._id,userId:localStorage.getItem("userId")}),Object(k.jsx)("span",{onClick:()=>{c(!i)},children:t("movie.reply")},"comment-basic-reply-to")],[d,m]=Object(s.useState)(!1),j=()=>{m(!0)},p=()=>{m(!1)};return Object(k.jsxs)("div",{children:[Object(k.jsx)(He.a,{actions:l,author:e.comment.writer&&e.comment.writer.username?Object(k.jsx)("b",{onClick:j,style:{cursor:"pointer"},children:e.comment.writer.username}):t("movie.userDeleted"),avatar:Object(k.jsx)(We.a,{onClick:j,src:e.comment.writer&&e.comment.writer.image?e.comment.writer.image:t("landing.notAvail"),alt:"image"}),datetime:X()(e.comment.date).format("DD/MM/YYYY - HH:mm"),content:Object(k.jsx)("p",{children:e.comment.content})}),e.comment.writer?Object(k.jsx)(Ve.a,{title:"".concat(t("users.profileTitle")," - ").concat(e.comment.writer.username),visible:d,onCancel:p,width:610,style:{top:20},footer:[Object(k.jsx)(P.a,{type:"primary",onClick:p,children:t("movieInfo.close")},"Close")],children:Object(k.jsxs)(W.a,{hoverable:!0,style:{display:"flex",justifyContent:"center",alignItems:"center"},cover:Object(k.jsx)(We.a,{src:e.comment.writer.image,size:84}),children:[Object(k.jsx)(Je,{title:Object(k.jsx)("b",{children:e.comment.writer.username})}),Object(k.jsx)("br",{}),Object(k.jsxs)("span",{children:[e.comment.writer.firstName," ",e.comment.writer.lastName]})]})}):null,i&&Object(k.jsxs)("form",{style:{display:"flex"},onSubmit:o,children:[Object(k.jsx)(Qe,{style:{width:"100%",borderRadius:"5px"},onChange:e=>{n(e.currentTarget.value)},value:r,placeholder:t("movie.comReply")}),Object(k.jsx)("br",{}),Object(k.jsx)(P.a,{style:{width:"20%",height:"52px"},onClick:o,children:Object(k.jsx)(Ke,{type:"icon-send",style:{fontSize:"20px"}})})]})]})};var tt=function e(t){const{t:a}=Object(M.a)(),[n,i]=Object(s.useState)(0),[c,o]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{let e=0;t.CommentLists.forEach((a=>{a.responseTo===t.parentCommentId&&e++})),i(e)}),[t.CommentLists,t.parentCommentId]),Object(k.jsxs)("div",{children:[n>0&&Object(k.jsxs)("p",{style:{fontSize:"14px",margin:0,color:"gray"},onClick:()=>{o(!c)},children:[a("movie.view")," ",n," ",a("movie.moreComs")]}),c&&(l=t.parentCommentId,t.CommentLists.map(((a,s)=>Object(k.jsx)(r.a.Fragment,{children:a.responseTo===l&&Object(k.jsxs)("div",{style:{width:"80%",marginLeft:"40px"},children:[Object(k.jsx)(et,{comment:a,postId:t.postId,refreshFunction:t.refreshFunction}),Object(k.jsx)(e,{CommentLists:t.CommentLists,parentCommentId:a._id,postId:t.postId,refreshFunction:t.refreshFunction})]})},a._id))))]});var l},at=a(482);const st=Object(se.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_o2mk1ztsiol.js"}),{TextArea:rt}=he.a,{Title:nt}=D.a;var it=function(e){const{t:t}=Object(M.a)(),a=Object(C.c)((e=>e.user)),[n,i]=Object(s.useState)(""),c=s=>{if(s.preventDefault(),a.userData&&!a.userData.isAuth)return ye.b.error(t("movie.loginFirst"));if(!n)return ye.b.error(t("movie.emptyCom"));const r={content:(c=n,(c=c.toString()).replace(/<[^>]*(>|$)|&nbsp;|&zwnj;|&raquo;|&laquo;|&gt;/g,"")),writer:a.userData._id,postId:e.postId};var c;u.a.post("/api/comment/saveComment",r).then((a=>{a.data.success?(i(""),e.refreshFunction(a.data.result)):ye.b.error(t("movie.failCom"))}))};return Object(k.jsxs)("div",{children:[Object(k.jsx)("br",{}),Object(k.jsxs)(nt,{level:3,children:[Object(k.jsx)(at.a,{style:{paddingRight:"10px",fontSize:"30px"}}),t("movie.share")," ",e.movieTitle," "]}),Object(k.jsx)("hr",{}),e.CommentLists&&e.CommentLists.map(((t,a)=>!t.responseTo&&Object(k.jsxs)(r.a.Fragment,{children:[Object(k.jsx)(et,{comment:t,postId:e.postId,refreshFunction:e.refreshFunction}),Object(k.jsx)(tt,{CommentLists:e.CommentLists,postId:e.postId,parentCommentId:t._id,refreshFunction:e.refreshFunction})]},t._id))),e.CommentLists&&0===e.CommentLists.length&&Object(k.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"},children:t("movie.comFirst")}),Object(k.jsxs)("form",{style:{display:"flex"},onSubmit:c,children:[Object(k.jsx)(rt,{style:{width:"100%",borderRadius:"5px"},onChange:e=>{i(e.currentTarget.value)},value:n,placeholder:t("movie.comText")}),Object(k.jsx)("br",{}),Object(k.jsx)(P.a,{style:{width:"20%",height:"52px"},onClick:c,children:Object(k.jsx)(st,{type:"icon-send",style:{fontSize:"20px"}})})]})]})},ct=a(483),ot=a(456),lt=a(457),dt=a(458);const mt=Object(se.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_05evm2uwptc9.js"}),jt=Object(se.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_c1v18kzse7b.js"});var ut=function(e){const{t:t}=Object(M.a)(),a=Object(m.f)(),r=Object(C.c)((e=>e.user)),n=e.movieId,i=e.userFrom,c=e.movieInfo.title,o=e.movieInfo.backdrop_path,l=e.movieInfo.runtime,[d,j]=Object(s.useState)(0),[p,b]=Object(s.useState)(!1),h=Object(s.useMemo)((()=>({movieId:n,userFrom:i,movieTitle:c,moviePost:o,movieRunTime:l})),[n,i,c,o,l]);return Object(s.useEffect)((()=>{let e=!0;return u.a.post("/api/favorite/favoriteNumber",h).then((t=>{t.data.success?e&&j(t.data.subscribeNumber):a.push("/")})).catch((e=>{console.log(e)})),()=>{e=!1}}),[e,a,h]),Object(s.useEffect)((()=>{let e=!0;return u.a.post("/api/favorite/favorited",h).then((t=>{t.data.success?e&&b(t.data.subcribed):a.push("/")})),()=>{e=!1}}),[e,h,a]),Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(P.a,{type:"primary",onClick:()=>{if(r.userData&&!r.userData.isAuth)return a.push("/");p?u.a.post("/api/favorite/removeFromFavorite",h).then((e=>{e.data.success?(j(d-1),b(!p)):a.push("/")})):u.a.post("/api/favorite/addToFavorite",h).then((e=>{e.data.success?(j(d+1),b(!p)):a.push("/")}))},children:[t(p?"favorites.remove":"favorites.add"),p?Object(k.jsx)(jt,{type:"icon-popcorn1",style:{fontSize:"20px"}}):Object(k.jsx)(mt,{type:"icon-popcorn",style:{fontSize:"20px"}}),d]})})};var pt=function(e){const[t,a]=Object(s.useState)(!1),n=Ye(),{t:i}=Object(M.a)(),{movie:c,directors:o,cast:l,trailer:d}=e,m="#999",j="#cd5c5c",u="#ffa500",p="#52c41a",b=function(e){let t=p;return e&&0!==c.vote_average?e<5.5?t=j:e<7&&(t=u):t=m,t}(c.vote_average),h=Object(se.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_3easwvxbvnh.js"});var g=[],x="";if(d.length>0){var O;for(O=0;O<d.length;O++)"Trailer"===d[O].type&&g.push(d[O].key);g.length>0&&(x="https://www.youtube.com/embed/"+g[0]+"?&autoplay=1")}const v=()=>{a(!1)},f="https://www.youtube.com/embed/"+g[0]+"?&autoplay=0",y=t?x:f;return Object(k.jsxs)("main",{style:{position:"relative"},children:[Object(k.jsx)("div",{className:n.backdrop,children:Object(k.jsx)("img",{className:n.backdropImage,src:c.backdrop_path?"".concat(w).concat(_).concat(c.backdrop_path):"https://res.cloudinary.com/dkyqbngya/image/upload/v1586787757/detykqycj7ejezsjmxln.png",alt:""})}),Object(k.jsx)(ot.a,{className:n.movieContainer,children:Object(k.jsxs)(lt.a,{container:!0,spacing:7,children:[Object(k.jsx)(lt.a,{item:!0,md:3,children:Object(k.jsx)("img",{className:n.poster,src:c.poster_path?"".concat(w).concat(N).concat(c.poster_path):i("landing.notAvail"),alt:"Poster of "+c.title})}),Object(k.jsxs)(lt.a,{item:!0,md:8,style:{color:"white"},children:[Object(k.jsx)("div",{className:n.releaseDate,children:Object(k.jsx)("h2",{style:{color:"white"},children:c.release_date?X()(new Date(c.release_date)).format("YYYY"):"N/A"})}),Object(k.jsxs)(dt.a,{variant:"h4",style:{fontWeight:"bold",color:"white"},component:"h1",children:[Object(k.jsx)(h,{type:"icon-movie1",style:{fontSize:"30px",paddingRight:"10px"}}),c.title]}),c.genres.length?Object(k.jsx)("ul",{className:n.genreList,children:c.genres.map(((e,t)=>Object(k.jsx)(ae.b,{to:{pathname:"/landing/genre/".concat(e.name,"/").concat(e.id)},children:Object(k.jsx)("li",{className:n.genre,children:e.name},e.id)},t)))}):null,Object(k.jsx)("div",{className:n.vote,children:Object(k.jsxs)("span",{style:{margin:"2px 0px 0 6px"},children:[Object(k.jsx)(V.a,{style:{backgroundColor:b,marginRight:16},offset:[0,0],count:c.vote_average}),Object(k.jsx)(ut,{movieInfo:c,movieId:c.id,userFrom:localStorage.getItem("userId")}),d?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(P.a,{type:"primary",style:{margin:"15px"},onClick:()=>{a(!0)},children:[Object(k.jsx)(ct.a,{style:{fontSize:"20px"}})," ",i("movieInfo.trailer")]}),Object(k.jsx)(Ve.a,{title:"".concat(i("movieInfo.trailerTitle")," ").concat(c.title," ").concat(i("movieInfo.watchHyper")),visible:t,onCancel:v,width:610,style:{top:20},footer:[Object(k.jsx)(P.a,{type:"primary",onClick:v,children:i("movieInfo.close")},"Close")],children:Object(k.jsx)("div",{className:"iframe-container",children:Object(k.jsx)("iframe",{title:c.title,width:"560",height:"315",src:y,frameBorder:"0",sameSite:"none; secure",Secure:!0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})]}):null]})}),Object(k.jsxs)("div",{style:{marginTop:10,marginBottom:10},children:[Object(k.jsxs)(dt.a,{component:"div",style:{marginRight:15},children:[Object(k.jsx)("b",{children:i("movieInfo.runtime")})," ",c.runtime?(e=>{const t=Math.floor(e/60);let a=e%60;return a<10&&(a="0"+a),"".concat(t,"h ").concat(a,"min")})(c.runtime):"N/A"]}),Object(k.jsxs)(dt.a,{component:"div",children:[Object(k.jsx)("b",{children:i("movieInfo.movietitle")})," ",c.original_title]}),Object(k.jsxs)(dt.a,{component:"div",children:[Object(k.jsx)("b",{children:i("movieInfo.actors")})," ",l.map((e=>e.name)).slice(0,5).join(", "),Object(k.jsx)("br",{}),Object(k.jsx)("b",{children:i("movieInfo.director")})," ",o.map((e=>e.name)).join(", "),Object(k.jsx)("br",{}),Object(k.jsx)("b",{children:i("movieInfo.prod")})," ",c.production_companies.map((function(e){return e.name})).shift()]})]}),c.overview&&Object(k.jsxs)(r.a.Fragment,{children:[Object(k.jsx)("h4",{className:n.subtitle,children:i("movieInfo.overview")}),Object(k.jsx)(dt.a,{variant:"body1",children:c.overview&&c.overview.length>700?c.overview.substring(0,700)+"...":c.overview})]})]})]})})]})},bt=a(459);const{Title:ht}=D.a,gt=Object(se.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_cpuj79al49d.js"});class xt extends r.a.Component{constructor(e){super(e),this.state={data:""},"Recommended Movies"===e.type&&u.a.post("/api/recommend").then((e=>{e&&this.setState({data:e.results})}))}render(){const{t:e}=this.props;if(""===this.state.data)return"";{let t=[];for(let a in this.state.data.slice(0,5))this.state.data[a].vote_count>2300&&null!==this.state.data[a].backdrop_path&&null!==this.state.data[a].overview&&t.push(Object(k.jsx)(r.a.Fragment,{children:Object(k.jsx)(J,{movie:!0,className:"similar_movies",image:this.state.data[a].poster_path?"".concat(w).concat(N).concat(this.state.data[a].poster_path):e("landing.notAvail"),movieId:this.state.data[a].id,movieName:this.state.data[a].title,date:this.state.data[a].release_date,vote:this.state.data[a].vote_average?this.state.data[a].vote_average:"N/A"})},a));return Object(k.jsxs)("div",{children:[Object(k.jsxs)(ht,{level:3,children:[Object(k.jsx)(gt,{type:"icon-movie",style:{fontSize:"35px",paddingRight:"10px"}}),e("movie.recommended")]}),Object(k.jsx)("hr",{}),Object(k.jsx)("br",{}),Object(k.jsx)(L.a,{gutter:[16,16],children:0===this.state.data.length?Object(k.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"},children:e("movie.recoNone")}):t})]})}}}var Ot=Object(bt.a)()(xt);const{Title:vt}=D.a,ft=Object(se.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_cpuj79al49d.js"});class yt extends r.a.Component{constructor(e){super(e),this.state={data:""},"Similar Movies"===e.type&&u.a.post("/api/similar").then((e=>{e&&this.setState({data:e.results})}))}render(){const{t:e}=this.props;if(!this.state.data)return"";if(""===this.state.data)return"";{let t=[];for(let a in this.state.data.slice(0,5))this.state.data[a].vote_count>2300&&null!==this.state.data[a].backdrop_path&&null!==this.state.data[a].overview&&t.push(Object(k.jsx)(r.a.Fragment,{children:Object(k.jsx)(J,{movie:!0,className:"similar_movies",image:this.state.data[a].poster_path?"".concat(w).concat(N).concat(this.state.data[a].poster_path):e("landing.notAvail"),movieId:this.state.data[a].id,movieName:this.state.data[a].title,date:this.state.data[a].release_date,vote:this.state.data[a].vote_average?this.state.data[a].vote_average:"N/A"})},a));return Object(k.jsxs)("div",{children:[Object(k.jsxs)(vt,{level:3,children:[Object(k.jsx)(ft,{type:"icon-movie",style:{fontSize:"35px",paddingRight:"10px"}}),e("movie.similar")]}),Object(k.jsx)("hr",{}),Object(k.jsx)("br",{}),Object(k.jsx)(L.a,{gutter:[16,16],children:0===this.state.data.length?Object(k.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"},children:e("movie.similarNone")}):t})]})}}}var wt=Object(bt.a)()(yt),_t=a(460);var Nt=function(e){const t=Ye(),{t:a}=Object(M.a)(),n=localStorage.getItem("language"),{Title:i}=D.a,c=e.match.params.movieId,[o,l]=Object(s.useState)([]),[d,m]=Object(s.useState)([]),[j,p]=Object(s.useState)([]),[b,h]=Object(s.useState)([]),[g,x]=Object(s.useState)([]),[O,y]=Object(s.useState)(!0),[w,_]=Object(s.useState)(!0),[N,S]=Object(s.useState)(!1),I=Object(se.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_vq7xtyn73yj.js"}),F=e.match.params.movieId;let z={postId:F};const q=Object(C.c)((e=>e.user));var E=[],A="";if(j.length>0){var R;for(R=0;R<j.length;R++)"Trailer"===j[R].type&&E.push(j[R].key);E.length>0&&(A="https://www.youtube.com/embed/"+E[0])}return Object(s.useEffect)((()=>{let t=!0;let s="".concat(v,"movie/").concat(c,"?api_key=").concat(f,"&language=").concat(n);return fetch(s).then((e=>e.json())).then((s=>{if(s.status_code)t&&y(!0),ye.b.error(a("landing.nomovie")),e.history.push("/landing");else{t&&l(s),t&&y(!1);let e="".concat(v,"movie/").concat(c,"/credits?api_key=").concat(f);const a=()=>{const e=localStorage.getItem("language");return e?"".concat(v,"movie/").concat(c,"/videos?api_key=").concat(f,"&language=").concat(e):"".concat(v,"movie/").concat(c,"/videos?api_key=").concat(f)};let r=a();fetch(e).then((e=>e.json())).then((e=>{t&&h(e.cast);const a=e.crew.filter((e=>"Director"===e.job));t&&m(a)})),_(!1),fetch(r).then((e=>e.json())).then((e=>{t&&p(e.results)}))}})).catch((e=>console.error("Error:",e))),u.a.post("/api/comment/getComments",z).then((a=>{a.data.success?t&&x(a.data.comments):e.history.push("/login")})),()=>{t=!1}}),[c,a,e,n]),Object(k.jsx)("div",{children:q.userData&&q.userData.isAuth?Object(k.jsxs)(k.Fragment,{children:[!O&&j?Object(k.jsx)(pt,{movie:o,directors:d,cast:b,trailer:j}):Object(k.jsx)("div",{children:Object(k.jsx)(T,{})}),Object(k.jsxs)("div",{style:{width:"85%",margin:"1rem auto"},children:[O?null:Object(k.jsx)("div",{style:{display:"flex",justifyContent:"center",margin:"2rem"},children:Object(k.jsx)(_t.a,{variant:"contained",className:t.buttonActors,onClick:()=>{S(!N)},children:a(N?"movie.dontShowActors":"movie.showActors")})}),N&&Object(k.jsx)(L.a,{gutter:[16,16],children:w?Object(k.jsx)("div",{children:Object(k.jsx)(T,{})}):b.map(((e,t)=>e.profile_path&&Object(k.jsx)(r.a.Fragment,{children:Object(k.jsx)(J,{actor:!0,image:e.profile_path,actorName:e.name,charName:e.character})},e.id)))}),Object(k.jsx)("br",{}),Object(k.jsxs)(i,{level:3,children:[Object(k.jsx)(I,{type:"icon-movie2",style:{fontSize:"28px",paddingRight:"10px"}}),a("movie.streamTitle")," ",o.title]}),Object(k.jsx)("hr",{}),Object(k.jsx)("br",{}),Object(k.jsx)("div",{style:{display:"flex",justifyContent:"center",margin:"2rem"},children:Object(k.jsx)("div",{className:"iframe-container",children:Object(k.jsx)("iframe",{title:o.title,width:"560",height:"315",src:A,frameBorder:"0",sameSite:"none; secure",Secure:!0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}),Object(k.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(k.jsx)(Ge,{video:!0,videoId:c,userId:localStorage.getItem("userId")})}),Object(k.jsx)(it,{movieTitle:o.title,CommentLists:g,postId:F,refreshFunction:e=>{x(g.concat(e))}}),Object(k.jsx)("br",{}),O?null:Object(k.jsx)("div",{children:Object(k.jsx)(Ot,{type:"Recommended Movies",urlParams:c})}),O?null:Object(k.jsx)("div",{children:Object(k.jsx)(wt,{type:"Similar Movies",urlParams:c})})]})]}):Object(k.jsx)(T,{})})},St=a(242),Ct=(a(409),a(484)),kt=a(485);const{Title:It}=D.a,Ft=Object(se.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_3easwvxbvnh.js"}),Mt=Object(se.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_05evm2uwptc9.js"});var zt=function(){const{t:e}=Object(M.a)(),[t,a]=Object(s.useState)([]),[r,n]=Object(s.useState)(!0),i=Object(m.f)();let c={userFrom:localStorage.getItem("userId")};const o=e=>{const t=Math.floor(e/60);let a=e%60;return a<10&&(a="0"+a),"".concat(t,"h ").concat(a,"min")};Object(s.useEffect)((()=>{l()}),[]);const l=()=>{u.a.post("/api/favorite/getFavoredMovie",c).then((e=>{e.data.success?(a(e.data.favorites),n(!1)):i.push("/login")}))},d=t.map(((t,a)=>{const s=Object(k.jsx)("div",{children:t.moviePost?Object(k.jsx)("img",{src:"".concat(w).concat(N).concat(t.moviePost),alt:""}):"no image"});return Object(k.jsxs)("tr",{children:[Object(k.jsx)(St.a,{content:s,title:"".concat(t.movieTitle),children:Object(k.jsxs)("td",{children:[Object(k.jsx)(Ft,{type:"icon-movie1",style:{fontSize:"20px",paddingRight:"10px"}}),Object(k.jsx)("strong",{children:Object(k.jsx)("a",{style:{color:"black"},href:"/movie/".concat(t.movieId),children:t.movieTitle})})]})}),Object(k.jsx)("td",{children:Object(k.jsxs)("center",{children:[Object(k.jsx)(Ct.a,{style:{paddingRight:"10px"}}),o(t.movieRunTime)]})}),Object(k.jsx)("td",{children:Object(k.jsx)("center",{children:Object(k.jsxs)(P.a,{type:"primary",onClick:()=>((e,t)=>{const a={movieId:e,userFrom:t};u.a.post("/api/favorite/removeFromFavorite",a).then((e=>{e.data.success?l():i.push("/login")}))})(t.movieId,t.userFrom),children:[Object(k.jsx)(kt.a,{}),e("favorites.removeButton")]})})})]},t._id)}));return Object(k.jsxs)("div",{style:{width:"85%",margin:"3rem auto"},children:[Object(k.jsxs)(It,{level:2,children:[Object(k.jsx)(Mt,{type:"icon-popcorn",style:{paddingRight:"10px"}}),e("favorites.title")]}),Object(k.jsx)("hr",{}),Object(k.jsx)("br",{}),!r&&Object(k.jsxs)("table",{children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsxs)("th",{children:[Object(k.jsx)(Ft,{type:"icon-movie1",style:{fontSize:"20px",paddingRight:"10px"}}),e("favorites.movieTitle")]}),Object(k.jsx)("th",{children:Object(k.jsxs)("center",{children:[Object(k.jsx)(Ct.a,{style:{paddingRight:"10px"}}),e("favorites.movieRuntime")]})}),Object(k.jsx)("th",{children:Object(k.jsxs)("center",{children:[Object(k.jsx)(kt.a,{style:{paddingRight:"10px"}}),e("favorites.remove")]})})]})}),Object(k.jsx)("tbody",{children:d})]})]})};const{Title:qt}=D.a,Et={labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:14},sm:{span:6}}},Tt={wrapperCol:{xs:{span:20,offset:0},sm:{span:14,offset:8}}};var At=function(){const{t:e}=Object(M.a)();return Object(k.jsx)(r.a.Fragment,{children:Object(k.jsx)(ue.a,{initialValues:{password:""},validationSchema:pe.a().shape({password:pe.c().min(4,e("register.passwordMin")).max(15,e("register.passwordMax")).required(e("register.passwordErr")),password_confirm:pe.c().oneOf([pe.b("password"),null],e("register.passwordMatch")).required(e("register.cpasswordErr"))}),onSubmit:(t,a)=>{let{setSubmitting:s}=a;setTimeout((()=>{var a,r;(a=t.password,r=t.password_confirm,u.a.post("".concat(O,"/updatePassword"),{password:a,password_confirm:r},{headers:S})).then((t=>{200===t.status?A.store.addNotification({message:e("editProfile.newpassok"),insert:"top",type:"success",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3,onScreen:!0}}):alert("Password Update Fail")})),s(!1)}),500)},children:t=>{const{errors:a,values:s,touched:r,isSubmitting:n,handleChange:i,handleBlur:c,handleSubmit:o}=t;return Object(k.jsxs)("div",{style:{width:"85%",margin:"3rem auto"},children:[Object(k.jsxs)(qt,{level:2,children:[Object(k.jsx)(Oe.a,{style:{paddingRight:"10px"}}),e("editProfile.editPassword")]}),Object(k.jsx)("hr",{}),Object(k.jsx)("br",{}),Object(k.jsxs)(be.a,{style:{minWidth:"375px"},...Et,onSubmit:o,children:[Object(k.jsx)(he.a,{type:"text",name:"username",value:"",autoComplete:"username",style:{display:"none"}}),Object(k.jsxs)(be.a.Item,{required:!0,label:e("editProfile.newpass"),hasFeedback:!0,validateStatus:a.password&&r.password?"error":"success",children:[Object(k.jsx)(he.a,{id:"password",prefix:Object(k.jsx)(Oe.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:e("register.passwordForm"),type:"password",name:"password",autoComplete:"current-password",onChange:i,onBlur:c,value:s.password,className:a.password&&r.password?"text-input error":"text-input"}),a.password&&r.password&&Object(k.jsx)("div",{className:"input-feedback",children:a.password})]}),Object(k.jsxs)(be.a.Item,{required:!0,label:e("editProfile.newcpass"),hasFeedback:!0,validateStatus:a.password_confirm&&r.password_confirm?"error":"success",children:[Object(k.jsx)(he.a,{id:"password_confirm",prefix:Object(k.jsx)(Oe.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:e("register.cpasswordForm"),type:"password",name:"password_confirm",autoComplete:"current-password",value:s.password_confirm,onChange:i,onBlur:c,className:a.password_confirm&&r.password_confirm?"text-input error":"text-input"}),a.password_confirm&&r.password_confirm&&Object(k.jsx)("div",{className:"input-feedback",children:a.password_confirm})]}),Object(k.jsx)(be.a.Item,{...Tt,children:Object(k.jsx)(P.a,{onClick:o,type:"primary",disabled:n,children:e("editProfile.updatePass")})})]})]})}})})};const{Title:Rt}=D.a,Dt={labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:14},sm:{span:6}}},Pt={wrapperCol:{xs:{span:20,offset:0},sm:{span:14,offset:8}}};var Lt=function(){const{t:e,i18n:t}=Object(M.a)(),a=Object(C.c)((e=>e.user)),[n,i]=Object(s.useState)(!1),[c,o]=Object(s.useState)(""),[l,d]=r.a.useState(""),[j,p]=Object(s.useState)([]),b=r.a.useRef(),g=Object(m.f)();var x=["jpg","jpeg","png","gif"];let v=t.language;function f(e){var a;a=e.target.value,t.changeLanguage(a),localStorage.setItem("language",e.target.value)}Object(s.useEffect)((()=>{u.a.get("/api/users/:userId").then((e=>{e.data.success?p(e.data.users):g.push("/login")}))}),[g]);const y=t=>{t.preventDefault(),d(t.target.value);const a=t.target.files[0];var s="https://api.cloudinary.com/v1_1/".concat("dkyqbngya","/image/upload");if(a&&0!==a.length&&a){var r=a.name.replace(/.*\./,"").toLowerCase();if(x.indexOf(r)<0)return ye.b.error("".concat(a.type).concat(e("register.imgFormat"))),b.current.value="",d(""),void o("");if(a.size>15e4)return ye.b.error("".concat(a.name).concat(e("register.imgTooLarge"))),b.current.value="",d(""),void o("");{var n=new FormData;n.append("file",a),n.append("upload_preset","f7r0dz2t"),i(!0);const t={headers:{"X-Requested-With":"XMLHttpRequest"}};u.a.post(s,n,t).then((e=>{i(!1);var t=e.data.secure_url.split("/");t.splice(-3,0,"w_125,c_scale");var a=new Image;a.src=t.join("/"),o(a.src)})).catch((t=>{if(t)switch(t.response.status){case 400:ye.b.error(e("register.imgInvalid"));break;case 404:ye.b.error(e("register.imgNotFound"));break;case 500:ye.b.error(e("register.imgError"))}}))}}},w=Object(C.b)();return a.userData&&a.userData.isAuth?j.map(((t,a)=>Object(k.jsxs)(r.a.Fragment,{children:[Object(k.jsx)(ue.a,{initialValues:{email:t.email,firstName:t.firstName,lastName:t.lastName,username:t.username,image:c,lang:v},validationSchema:pe.a().shape({username:pe.c().required(e("register.usernameErr")).matches(/^[A-Za-z0-9_]{2,20}$/,e("register.usernameRules")).min(2,e("register.usernameMin")).max(20,e("register.usernameMax")),firstName:pe.c().required(e("register.firstNameErr")).matches(/^[A-Z]+$/i,e("register.firstNameAlpha")).min(2,e("register.firstNameMin")).max(20,e("register.firstNameMax")),lastName:pe.c().required(e("register.lastNameErr")).matches(/^[A-Z]+$/i,e("register.lastNameAlpha")).min(2,e("register.lastNameMin")).max(20,e("register.lastNameMax")),email:pe.c().email(e("register.emailInvalid")).required(e("register.emailErr"))}),onSubmit:(t,a)=>{let{setSubmitting:s}=a;setTimeout((()=>{let a={email:t.email,username:t.username,firstName:t.firstName,lastName:t.lastName,image:c,lang:v};w(function(e){const t=u.a.post("".concat(O,"/update"),e).then((e=>e.data));return{type:h,payload:t}}(a)).then((t=>{t.payload.success?A.store.addNotification({message:e("editProfile.profileUpdated"),insert:"top",type:"success",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3,onScreen:!0}}):alert(t.payload.err)})),s(!1)}),500)},children:a=>{const{errors:s,touched:r,isSubmitting:i,handleChange:o,handleBlur:d,handleSubmit:m}=a;return Object(k.jsxs)("div",{style:{width:"85%",margin:"3rem auto"},children:[Object(k.jsxs)(Rt,{level:2,children:[Object(k.jsx)(xe.a,{style:{paddingRight:"10px"}}),e("editProfile.title")]}),Object(k.jsx)("hr",{}),Object(k.jsx)("br",{}),Object(k.jsx)("main",{style:{position:"relative"},children:Object(k.jsxs)(be.a,{style:{minWidth:"375px"},...Dt,onSubmit:m,children:[Object(k.jsxs)(be.a.Item,{required:!0,label:e("editProfile.avatar"),children:[Object(k.jsx)("div",{name:"image",className:"imagePreview",children:c?Object(k.jsx)(We.a,{src:c,size:130}):n?Object(k.jsx)(T,{}):Object(k.jsx)(We.a,{src:t.image,alt:"",size:130})}),Object(k.jsx)(he.a,{id:"image",type:"file",name:"image",accept:"image/*",ref:b,onChange:y,value:l,onBlur:d})]}),Object(k.jsx)(be.a.Item,{required:!0,label:e("editProfile.prefLang"),children:Object(k.jsxs)("select",{defaultValue:v,onChange:f,children:[Object(k.jsx)("option",{value:"en-US",children:e("navbar.lngEN")}),Object(k.jsx)("option",{value:"fr-FR",children:e("navbar.lngFR")})]})}),Object(k.jsxs)(be.a.Item,{required:!0,label:e("register.username"),children:[Object(k.jsx)(he.a,{id:"username",type:"text",autoComplete:"username",defaultValue:t.username,onChange:o,onBlur:d,className:s.username&&r.username?"text-input error":"text-input"}),s.username&&r.username&&Object(k.jsx)("div",{className:"input-feedback",children:s.username})]}),Object(k.jsxs)(be.a.Item,{required:!0,label:e("register.firstName"),children:[Object(k.jsx)(he.a,{id:"firstName",type:"text",defaultValue:t.firstName,onChange:o,onBlur:d,className:s.firstName&&r.firstName?"text-input error":"text-input"}),s.firstName&&r.firstName&&Object(k.jsx)("div",{className:"input-feedback",children:s.firstName})]}),Object(k.jsxs)(be.a.Item,{required:!0,label:e("register.lastName"),children:[Object(k.jsx)(he.a,{id:"lastName",type:"text",defaultValue:t.lastName,onChange:o,onBlur:d,className:s.lastName&&r.lastName?"text-input error":"text-input"}),s.lastName&&r.lastName&&Object(k.jsx)("div",{className:"input-feedback",children:s.lastName})]}),Object(k.jsxs)(be.a.Item,{required:!0,label:e("register.email"),children:[Object(k.jsx)(he.a,{id:"email",type:"email",autoComplete:"email",defaultValue:t.email,onChange:o,onBlur:d,className:s.email&&r.email?"text-input error":"text-input"}),s.email&&r.email&&Object(k.jsx)("div",{className:"input-feedback",children:s.email})]}),Object(k.jsx)(be.a.Item,{...Pt,children:Object(k.jsx)(P.a,{onClick:m,type:"primary",disabled:i,children:e("editProfile.update")})})]},t._id)})]})}}),Object(k.jsx)("br",{}),Object(k.jsx)(At,{})]},t._id))):Object(k.jsx)(T,{})};const{Title:Bt}=D.a,{Meta:Ut}=W.a;var Yt=function(){const{t:e}=Object(M.a)(),[t,a]=Object(s.useState)([]),[r,n]=Object(s.useState)(!0),i=Object(m.f)();Object(s.useEffect)((()=>{u.a.get("/api/users/getUsers").then((e=>{e.data.success?(a(e.data.users),n(!1)):i.push("/login")}))}),[i]);const c=t.map(((e,t)=>Object(k.jsx)(B.a,{lg:6,md:8,xs:24,children:Object(k.jsxs)(W.a,{hoverable:!0,style:{width:240,display:"flex",justifyContent:"center",alignItems:"center"},cover:Object(k.jsx)(We.a,{src:e.image,size:84}),children:[Object(k.jsx)(Ut,{title:e.username}),Object(k.jsx)("br",{}),Object(k.jsxs)("span",{children:[e.firstName," ",e.lastName]})]})},e._id)));return Object(k.jsxs)("div",{style:{width:"85%",margin:"3rem auto"},children:[Object(k.jsx)(Bt,{level:2,children:e("users.usersTitle")}),Object(k.jsx)("hr",{}),Object(k.jsx)("br",{}),!r&&Object(k.jsx)(L.a,{gutter:[16,16],children:c})]})};var Ht=()=>{const{t:e}=Object(M.a)();return Object(k.jsxs)("div",{className:"not_found_container",children:[Object(k.jsx)("div",{children:e("notFound.sorry")}),Object(k.jsx)("div",{children:e("notFound.notfound")})]})};var Wt=function(){const{t:e}=Object(M.a)();return Object(k.jsxs)(s.Suspense,{fallback:e(Object(k.jsx)(T,{})),children:[Object(k.jsx)(Be,{}),Object(k.jsxs)("div",{style:{paddingTop:"69px",minHeight:"calc(100vh - 80px)"},children:[Object(k.jsxs)("div",{className:"notifications",children:[" ",Object(k.jsx)(R.a,{})," "]}),Object(k.jsxs)(m.c,{children:[Object(k.jsx)(m.a,{exact:!0,path:"/",component:I(fe,!1)}),Object(k.jsx)(m.a,{exact:!0,path:"/login",component:I(fe,!1)}),Object(k.jsx)(m.a,{exact:!0,path:"/landing",component:I(de,!0)}),Object(k.jsx)(m.a,{exact:!0,path:"/landing/genre/:genreName/:genreId",component:I(je,!0)}),Object(k.jsx)(m.a,{exact:!0,path:"/register",component:I(Ne,!1)}),Object(k.jsx)(m.a,{exact:!0,path:"/movie/:movieId",component:I(Nt,!0)}),Object(k.jsx)(m.a,{exact:!0,path:"/favorite",component:I(zt,!0)}),Object(k.jsx)(m.a,{exact:!0,path:"/profile",component:I(Lt,!0)}),Object(k.jsx)(m.a,{exact:!0,path:"/users",component:I(Yt,!0)}),Object(k.jsx)(m.a,{component:I(Ht,null)})]})]}),Object(k.jsx)(Ue,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Vt=a(87);const $t=Object(Vt.c)({user:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return{...e,register:t.payload};case h:return{...e,update:t.payload};case p:return{...e,loginSucces:t.payload};case g:return{...e,userData:t.payload};case x:return{...e};default:return e}}});var Xt=$t,Zt=a(236),Gt=a.n(Zt),Jt=a(237);const Kt=Object(Vt.a)(Gt.a,Jt.a)(Vt.d);d.a.render(Object(k.jsx)(C.a,{store:Kt(Xt,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),children:Object(k.jsx)(ae.a,{children:Object(k.jsx)(s.Suspense,{fallback:Object(k.jsx)(T,{}),children:Object(k.jsx)(Wt,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()})).catch((e=>{console.error(e.message)}))}},[[414,1,2]]]);
//# sourceMappingURL=main.9bbd45d0.chunk.js.map